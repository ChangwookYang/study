
##### 4/16 공부 - Oauth2.0

사이트 편의를 위해 네이버/카카오 로그인을 제공한다고 하자.

간단한 방법은 고객한테 네이버 아이디/비밀번호를 받아서 네이버에 로그인해보면 된다.

말도 안되는 방법이니 Oauth가 생겼다.

Oauth는 쉽게 말해서 다른 서비스의 회원 정보를 안전하게 사용하기 위한 방법이다.

고객이 자신의 아이디/비밀번호를 알려주지 않아도 네이버에 있는 고객정보를

우리 서비스에서 안전하게 사용하기 위한 방법이다.

#### Access Token

Oauth의 핵심은 Access Token이다. 이 Access Token은 임의의 문자열 값인데,

이 문자열의 정체는 이 토큰을 발급해준 서비스만 알 수 있다.

이 Access Token을 이용해, 이 토큰값과 관련된 고객의 정보를 우리는 해당 서비스에 요청할수있다.

해당 서비스는 이 토큰을 검증하고, 발급된게 맞다면 해당 고객의 정보를 넘겨준다.

즉 Access Token의 존재 자체가 고객이 정보를 넘겨주는 것을 동의함의 징표이다.

![image](https://media.vlpt.us/images/undefcat/post/2f54c975-f8dd-47ce-a894-4a8128091a07/image.png)



##### 네이버는 Access Token을 어떻게 발급해줄까?

네이버 로그인 페이지로 이동하고 로그인을 하게 된다.

고객이 네이버 회원임을 확인하였다. 그러면 이제 이 고객과 관련된 Access Token을 발급한다.

1. 단순한 방법은 네이버가 토큰값을 화면에 출력하고 이 토큰을 우리 서비스에 입력하는 방법이다.
   * 말이 안되게 귀찮은 방법이다.
2. Redirect : Http 에는 리다이렉트 메시지가 존재한다.
   * 고객이 로그인하고 네이버에서 다시 우리 서비스로 리다이렉트 시켜준다.
   * 고객은 가만히 있고 우리 서비스로 토큰값을 넘겨줄 수 있다.
   * URL에 묶어서 query string에 담아서 넘겨 줄 수 있다.
   * 네이버에 미리 리다이렉트를 받을 url을 넘겨준다.

